Measure Mode: cpu_time
Thread ID: 70304332511740
Fiber ID: 70304337779040
Total: 4.502673
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.09      0.006     0.004     0.000     0.002        5  *Kernel#require
  0.01      0.000     0.000     0.000     0.000        4   Thread#initialize
  0.01      1.716     0.000     1.715     0.000        4   Coolio::Loop#run_once
  0.00      0.000     0.000     0.000     0.000       46   Regexp#match
  0.00      0.000     0.000     0.000     0.000        1   Time#strftime
  0.00      0.000     0.000     0.000     0.000        4   <Class::Thread>#new
  0.00      0.000     0.000     0.000     0.000       26   String#split
  0.00      0.000     0.000     0.000     0.000        1   <Class::IO>#read
  0.00      2.566     0.000     2.566     0.000        2   Thread#join
  0.00      0.000     0.000     0.000     0.000        3   Coolio::TimerWatcher#on_timer
  0.00      2.572     0.000     0.000     2.572       13  *Array#each
  0.00      0.000     0.000     0.000     0.000       37   MatchData#[]
  0.00      0.000     0.000     0.000     0.000       45   String#match
  0.00      0.000     0.000     0.000     0.000       10   IO#set_encoding
  0.00      0.002     0.000     0.000     0.002       31  *Class#new
  0.00      1.716     0.000     0.000     1.716        1   Coolio::Loop#run
  0.00      0.000     0.000     0.000     0.000        1   <Class::Struct>#new
  0.00      0.210     0.000     0.210     0.000        2   IO#write
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor::Worker#<<
  0.00      0.000     0.000     0.000     0.000        3   Aws::Deprecations#deprecated
  0.00      0.000     0.000     0.000     0.000       46   Module#method_added
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_initialize
  0.00      0.000     0.000     0.000     0.000        3   Array#map
  0.00      0.000     0.000     0.000     0.000       50   Kernel#nil?
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#divmod
  0.00      0.000     0.000     0.000     0.000        7   Module#attr_reader
  0.00      4.494     0.000     0.000     4.494        1   Fluent::EngineClass#run
  0.00      0.210     0.000     0.000     0.210        1   IO#puts
  0.00      0.000     0.000     0.000     0.000        1   Fluent::DummyInput#start
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#event
  0.00      0.001     0.000     0.000     0.001        8  *Thread::Mutex#synchronize
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Synchronization::MriMutexLockableObject#initialize
  0.00      0.000     0.000     0.000     0.000        7   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        1   Coolio::Loop#ev_loop_new
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#initialize
  0.00      2.567     0.000     0.000     2.567        1   Fluent::RootAgent#shutdown
  0.00      0.008     0.000     0.000     0.008        1   Fluent::KinesisHelper::Credentials#default_credentials_provider
  0.00      0.000     0.000     0.000     0.000        1   Coolio::TimerWatcher#initialize
  0.00      0.001     0.000     0.000     0.001        1   KinesisProducer::Library#initialize
  0.00      0.001     0.000     0.000     0.001       10  *Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.00      2.472     0.000     0.000     2.472        1   Fluent::Agent#shutdown
  0.00      0.000     0.000     0.000     0.000        2   Fluent::Log#debug
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Synchronization::Object#initialize
  0.00      0.000     0.000     0.000     0.000        1   IO#flush
  0.00      0.001     0.000     0.000     0.001        5  *<Class::Concurrent::Synchronization::MriMutexLockableObject>#new
  0.00      0.000     0.000     0.000     0.000       26   Array#first
  0.00      0.001     0.000     0.000     0.001        1   Aws::CredentialProviderChain#static_credentials
  0.00      0.211     0.000     0.000     0.210        1   Fluent::Log#puts
  0.00      0.000     0.000     0.000     0.000        5   Hash#merge
  0.00      0.000     0.000     0.000     0.000        1   Coolio::Loop#initialize
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#caller_line
  0.00      0.000     0.000     0.000     0.000        2   <Module::Process>#clock_gettime
  0.00      0.211     0.000     0.000     0.211        1   Fluent::Log#info
  0.00      0.000     0.000     0.000     0.000        3   Hash#each
  0.00      0.000     0.000     0.000     0.000        1   Aws::CredentialProviderChain#env_credentials
  0.00      0.000     0.000     0.000     0.000        3   Aws::Credentials#set?
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_execute
  0.00      0.000     0.000     0.000     0.000        6   Thread::Mutex#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#expand_path
  0.00      0.001     0.000     0.000     0.001        1   Aws::SharedCredentials#initialize
  0.00      0.000     0.000     0.000     0.000        6   Hash#initialize_copy
  0.00      0.009     0.000     0.000     0.009        1   Fluent::KinesisHelper::KPL#start
  0.00      0.000     0.000     0.000     0.000        1   <Class::OS>#linux?
  0.00      0.000     0.000     0.000     0.000        2   <Class::OS>#host_os
  0.00      0.000     0.000     0.000     0.000        3   String#intern
  0.00      0.000     0.000     0.000     0.000        7   Symbol#to_s
  0.00      2.567     0.000     0.000     2.567        1   Fluent::EngineClass#shutdown
  0.00      0.000     0.000     0.000     0.000        4   Fixnum#zero?
  0.00      0.000     0.000     0.000     0.000       10   Thread::Mutex#owned?
  0.00      0.008     0.000     0.000     0.008        1   Fluent::KinesisHelper::KPL#client_options
  0.00      0.000     0.000     0.000     0.000        2   Fluent::Agent#start
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::AbstractExecutorService#ns_auto_terminate=
  0.00      0.000     0.000     0.000     0.000        1   Coolio::TimerWatcher#attach
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::CachedThreadPool#initialize
  0.00      0.004     0.000     0.000     0.004        1   Aws::CredentialProviderChain#shared_credentials
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EngineClass#stop
  0.00      0.000     0.000     0.000     0.000        2   <Module::Concurrent>#monotonic_time
  0.00      0.000     0.000     0.000     0.000        1   Coolio::Watcher#attach
  0.00      0.000     0.000     0.000     0.000        4   Class#inherited
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#exist?
  0.00      0.000     0.000     0.000     0.000        1   Method#to_proc
  0.00      0.001     0.000     0.000     0.001        1   Aws::SharedCredentials#ini_parse
  0.00      0.000     0.000     0.000     0.000        2   <Class::File>#join
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_assign_worker
  0.00      0.000     0.000     0.000     0.000        3   Aws::Credentials#initialize
  0.00      0.000     0.000     0.000     0.000        3   Module#alias_method
  0.00      0.000     0.000     0.000     0.000        1   <Class::OS>#mac?
  0.00      0.000     0.000     0.000     0.000        1   Float#to_i
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyExecutorService#initialize
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_add_busy_worker
  0.00      0.000     0.000     0.000     0.000        1   String#lines
  0.00      0.009     0.000     0.000     0.009        1   Fluent::KinesisHelper::Client#client
  0.00      0.000     0.000     0.000     0.000        1   Fluent::RootAgent#start
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EventRouter#find
  0.00      0.000     0.000     0.000     0.000        2   #<Class:0x007fe202d0f868>#get_time
  0.00      0.000     0.000     0.000     0.000        3   Module#define_method
  0.00      0.000     0.000     0.000     0.000        1   <Class::KinesisProducer::Library>#default_binary_path
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor::Worker#initialize
  0.00      0.000     0.000     0.000     0.000        1   Aws::CredentialProvider#set?
  0.00      0.000     0.000     0.000     0.000        2   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        1   Fluent::KinesisHelper::KPL#build_kpl_configuration
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicFixnum#range_check!
  0.00      0.001     0.000     0.000     0.001        1   Aws::SharedCredentials#profiles
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Synchronization::Object#initialize_volatile_with_cas
  0.00      0.000     0.000     0.000     0.000        1   Aws::SharedCredentials#loadable?
  0.00      0.000     0.000     0.000     0.000        5   Thread::ConditionVariable#initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::Coolio::Loop>#default
  0.00      0.000     0.000     0.000     0.000        2   Concurrent::Event#initialize
  0.00      0.000     0.000     0.000     0.000        1   Aws::SharedCredentials#default_path
  0.00      0.000     0.000     0.000     0.000        2   Array#include?
  0.00      0.000     0.000     0.000     0.000        7   Hash#fetch
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Utility::EngineDetector#on_jruby?
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Map#initialize
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::CachedThreadPool#ns_initialize
  0.00      0.000     0.000     0.000     0.000        1   Thread::Queue#<<
  0.00      0.000     0.000     0.000     0.000        1   Array#join
  0.00      0.000     0.000     0.000     0.000        2   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        1   Time#initialize
  0.00      0.000     0.000     0.000     0.000        1   Coolio::Loop#stop
  0.00      0.000     0.000     0.000     0.000        2   Concurrent::Event#ns_initialize
  0.00      0.000     0.000     0.000     0.000        1   <Class::File>#readable?
  0.00      0.006     0.000     0.000     0.006        1   Aws::CredentialProviderChain#resolve
  0.00      0.000     0.000     0.000     0.000        1   Aws::CredentialProviderChain#providers
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicBoolean#initialize
  0.00      0.000     0.000     0.000     0.000        3   Aws::CredentialProviderChain#envar
  0.00      0.000     0.000     0.000     0.000        1   <Class::KinesisProducer::Library>#binary
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Collection::MriMapBackend#initialize
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyExecutorService#post
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#start
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Synchronization::MriObject#initialize
  0.00      0.000     0.000     0.000     0.000        8   <Object::Object>#key?
  0.00      0.000     0.000     0.000     0.000        1   Kernel#method
  0.00      0.000     0.000     0.000     0.000        2   Module#private
  0.00      0.000     0.000     0.000     0.000        1   Fluent::KinesisHelper::Client#client_class
  0.00      0.008     0.000     0.000     0.008        1   Fluent::KinesisHelper::Credentials#credentials
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EngineClass#push_log_event
  0.00      0.000     0.000     0.000     0.000        1   Aws::CredentialProviderChain#initialize
  0.00      0.000     0.000     0.000     0.000        1   Kernel#extend
  0.00      0.000     0.000     0.000     0.000        1   Module#append_features
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EventRouter#match?
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Synchronization::MriAttrVolatile#full_memory_barrier
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicFixnum#ns_initialize
  0.00      0.000     0.000     0.000     0.000        1   Fluent::GlobMatchPattern#match
  0.00      0.000     0.000     0.000     0.000        1   Thread#_coolio_loop
  0.00      0.001     0.000     0.000     0.001        1   Aws::SharedCredentials#load_from_path
  0.00      0.000     0.000     0.000     0.000        1   Module#extend_object
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyExecutorService#ns_running?
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Utility::EngineDetector#ruby_engine
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::AbstractExecutorService#initialize
  0.00      0.000     0.000     0.000     0.000        2   <Class::OS>#config
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicFixnum#initialize
  0.00      0.000     0.000     0.000     0.000        1   Integer#round
  0.00      0.000     0.000     0.000     0.000        1   Time#to_i
  0.00      0.000     0.000     0.000     0.000        2   <Class::Thread>#current
  0.00      0.001     0.000     0.000     0.001        1   Aws::SharedCredentials#load_profile
  0.00      0.000     0.000     0.000     0.000        4   Integer#to_i
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Config::Section#method_missing
  0.00      0.000     0.000     0.000     0.000        1   Coolio::Loop#attach
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::AtExitImplementation#add
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Input#start
  0.00      0.000     0.000     0.000     0.000        1   Array#pop
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#initialize
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EventRouter::Rule#match?
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_f
  0.00      0.000     0.000     0.000     0.000        1   Hash#each_pair
  0.00      0.000     0.000     0.000     0.000        3   Module#to_s
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_reset_if_forked
  0.00      0.000     0.000     0.000     0.000        1   <Object::Fluent::KinesisProducerOutput>#request_type
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicFixnum#ns_set
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyExecutorService#stop_event
  0.00      0.000     0.000     0.000     0.000        3   Thread::Queue#initialize
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::AbstractExecutorService#running?
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::AbstractExecutorService#auto_terminate=
  0.00      0.000     0.000     0.000     0.000        3   BasicObject#singleton_method_added
  0.00      0.000     0.000     0.000     0.000        1   Float#+
  0.00      0.000     0.000     0.000     0.000        1   Module#include
  0.00      0.000     0.000     0.000     0.000        2   Kernel#hash
  0.00      0.000     0.000     0.000     0.000        1   <Class::OS>#osx?
  0.00      0.000     0.000     0.000     0.000        1   <Class::Time>#now
  0.00      0.000     0.000     0.000     0.000        1   Hash#keys
  0.00      0.000     0.000     0.000     0.000        2   Kernel#class
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Config::Section#to_h
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicBoolean#ns_initialize
  0.00      0.000     0.000     0.000     0.000        1   Fluent::KinesisHelper::ClassMethods#request_type
  0.00      0.000     0.000     0.000     0.000        1   Unknown#new
  0.00      0.000     0.000     0.000     0.000        1   Unknown#profile
  0.00      0.000     0.000     0.000     0.000        1   <Class::Dir>#home
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Collection::NonConcurrentMapBackend#initialize
  0.00      0.000     0.000     0.000     0.000        1   Module#const_get
  0.00      0.000     0.000     0.000     0.000        1   Hash#has_key?
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Event#set?
  0.00      0.000     0.000     0.000     0.000        1   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   String#to_s
  0.00      0.000     0.000     0.000     0.000        3   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000        1   Module#included
  0.00      0.000     0.000     0.000     0.000        1   Hash#update
  0.00      0.000     0.000     0.000     0.000        1   <Object::Object>#[]
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#debug?
  0.00      0.000     0.000     0.000     0.000        1   Enumerable#each_with_index
  0.00      0.000     0.000     0.000     0.000        1   Unknown#access_key_id
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Library::Handler#initialize
  0.00      0.000     0.000     0.000     0.000        1   Struct#initialize
  0.00      0.000     0.000     0.000     0.000        1   Unknown#secret_access_key
  0.00      0.000     0.000     0.000     0.000        1   Unknown#session_token
  0.00      0.000     0.000     0.000     0.000        1   Hash#delete
  0.00      0.000     0.000     0.000     0.000        1   Module#extended
  0.00      0.000     0.000     0.000     0.000        1   Kernel#block_given?
  0.00      0.000     0.000     0.000     0.000        1   Kernel#kind_of?
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#/
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#+

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304343517120
Fiber ID: 70304343516500
Total: 4.493401
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.05      0.002     0.002     0.000     0.000        1   <Module::Process>#fork
  0.04      0.002     0.002     0.000     0.000        1   Kernel#system
  0.02      0.008     0.001     0.008     0.000        4   File#initialize
  0.01      0.636     0.001     0.636     0.000        2   Kernel#sleep
  0.01      0.000     0.000     0.000     0.000        2   Time#strftime
  0.01      0.000     0.000     0.000     0.000        4   Thread#initialize
  0.00      0.000     0.000     0.000     0.000        2   <Class::File>#delete
  0.00      0.004     0.000     0.002     0.001       16  *Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.00      0.553     0.000     0.000     0.553        1   KinesisProducer::Daemon#start_child_daemon
  0.00      0.000     0.000     0.000     0.000        4   <Class::Thread>#new
  0.00      0.000     0.000     0.000     0.000        2   Pathname#open
  0.00      0.000     0.000     0.000     0.000        2   <Class::File>#stat
  0.00      0.001     0.000     0.000     0.001       11  *Thread::Mutex#synchronize
  0.00      0.001     0.000     0.000     0.001        4   Concurrent::RubyThreadPoolExecutor#ns_execute
  0.00      0.009     0.000     0.000     0.009        2   <Module::Dir::Tmpname>#create
  0.00      0.008     0.000     0.000     0.008        4   <Class::IO>#open
  0.00      0.096     0.000     0.000     0.096        1   KinesisProducer::Daemon#create_pipes
  0.00      0.001     0.000     0.000     0.000        1   KinesisProducer::Daemon#connect_to_child
  0.00      0.010     0.000     0.000     0.010       14  *Class#new
  0.00      0.009     0.000     0.000     0.009        2   Tempfile#initialize
  0.00      0.001     0.000     0.000     0.001        4   Concurrent::RubyThreadPoolExecutor::Worker#initialize
  0.00      0.001     0.000     0.000     0.001        4   Concurrent::RubyThreadPoolExecutor#ns_add_busy_worker
  0.00      0.558     0.000     0.000     0.558        1   KinesisProducer::Daemon#start_child
  0.00      0.000     0.000     0.000     0.000        4   Thread::Queue#initialize
  0.00      0.000     0.000     0.000     0.000        2   File::Stat#directory?
  0.00      0.001     0.000     0.000     0.001        4   Concurrent::RubyThreadPoolExecutor#ns_assign_worker
  0.00      0.000     0.000     0.000     0.000        2   Kernel#rand
  0.00      0.000     0.000     0.000     0.000        6   <Module::Concurrent>#monotonic_time
  0.00      0.654     0.000     0.000     0.654        1   Concurrent::RubyThreadPoolExecutor::Worker#run_task
  0.00      0.000     0.000     0.000     0.000        2   <Module::Dir::Tmpname>#make_tmpname
  0.00      0.004     0.000     0.000     0.004        4   Concurrent::RubyExecutorService#post
  0.00      0.004     0.000     0.000     0.004        4   KinesisProducer::Daemon#start_loop_for
  0.00      0.000     0.000     0.000     0.000        6   <Module::Process>#clock_gettime
  0.00      0.000     0.000     0.000     0.000        4   Kernel#block_given?
  0.00      0.000     0.000     0.000     0.000       16   Thread::Mutex#owned?
  0.00      0.000     0.000     0.000     0.000        2   Array#each
  0.00      0.000     0.000     0.000     0.000        6   #<Class:0x007fe202d0f868>#get_time
  0.00      0.004     0.000     0.000     0.004        1   KinesisProducer::Daemon#start_loops
  0.00      3.839     0.000     3.839     0.000        2   Thread::Queue#pop
  0.00      0.009     0.000     0.000     0.009        2   KinesisProducer::Daemon#temp_pathname
  0.00      0.000     0.000     0.000     0.000       10   <Class::Delegator>#const_missing
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::RubyExecutorService#ns_running?
  0.00      0.000     0.000     0.000     0.000        2   <Class::Dir>#tmpdir
  0.00      4.493     0.000     0.000     4.493        1   Kernel#loop
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::Event#set?
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::AbstractExecutorService#running?
  0.00      0.000     0.000     0.000     0.000        4   Concurrent::RubyThreadPoolExecutor::Worker#<<
  0.00      0.000     0.000     0.000     0.000        2   <Module::ObjectSpace>#define_finalizer
  0.00      0.000     0.000     0.000     0.000        2   Pathname#initialize
  0.00      0.000     0.000     0.000     0.000        6   <Object::Object>#[]
  0.00      0.000     0.000     0.000     0.000        4   Concurrent::RubyThreadPoolExecutor#ns_reset_if_forked
  0.00      0.000     0.000     0.000     0.000        5   Concurrent::RubyExecutorService#stop_event
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ns_ready_worker
  0.00      4.493     0.000     0.000     4.493        5  *Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      0.000     0.000     0.000     0.000       10   Module#const_get
  0.00      0.000     0.000     0.000     0.000        2   Pathname#to_path
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#worker_task_completed
  0.00      0.000     0.000     0.000     0.000        6   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        2   <Class::File>#expand_path
  0.00      0.000     0.000     0.000     0.000        2   Delegator#initialize
  0.00      0.000     0.000     0.000     0.000        4   Fixnum#to_s
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::RubyThreadPoolExecutor#ready_worker
  0.00      0.000     0.000     0.000     0.000        2   Tempfile::Remover#initialize
  0.00      0.000     0.000     0.000     0.000        6   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        2   Kernel#freeze
  0.00      0.000     0.000     0.000     0.000        2   <Class::Time>#now
  0.00      0.000     0.000     0.000     0.000        2   <Class::File>#join
  0.00      0.000     0.000     0.000     0.000        6   Fixnum#|
  0.00      0.000     0.000     0.000     0.000        2   File::Stat#writable?
  0.00      0.000     0.000     0.000     0.000        4   Fixnum#divmod
  0.00      0.000     0.000     0.000     0.000        2   #<Class:0x007fe203025de0>#__setobj__
  0.00      0.000     0.000     0.000     0.000        4   Thread::Queue#<<
  0.00      0.000     0.000     0.000     0.000        4   Array#pop
  0.00      4.493     0.000     0.000     4.493        1   Kernel#catch
  0.00      0.000     0.000     0.000     0.000        2   <Module::Dir::Tmpname>#tmpdir
  0.00      0.000     0.000     0.000     0.000        2   Tempfile#path
  0.00      0.000     0.000     0.000     0.000        2   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        1   Array#shift
  0.00      0.000     0.000     0.000     0.000        2   Time#initialize
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#debug?
  0.00      0.000     0.000     0.000     0.000        2   File::Stat#world_writable?
  0.00      0.000     0.000     0.000     0.000        2   Fixnum#+
  0.00      0.000     0.000     0.000     0.000        2   <Class::String>#try_convert
  0.00      0.000     0.000     0.000     0.000        1   Array#push
  0.00      0.000     0.000     0.000     0.000        2   File#path
  0.00      0.000     0.000     0.000     0.000        2   <Module::Process>#pid
  0.00      0.000     0.000     0.000     0.000        2   <Module::ObjectSpace>#undefine_finalizer
  0.00      0.000     0.000     0.000     0.000        2   #<Module:0x007fe201973408>#block_given?
  0.00      0.000     0.000     0.000     0.000        2   BasicObject#equal?
  0.00      0.000     0.000     0.000     0.000        2   Symbol#===

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304343516880
Fiber ID: 70304343515720
Total: 2.020751
Sort by: self_time

 %self      total      self      wait     child     calls  name
  1.24      0.087     0.025     0.000     0.062     1600   MonitorMixin#mon_synchronize
  0.70      0.052     0.014     0.000     0.038     1600   Fluent::OneEventStream#each
  0.65      0.018     0.013     0.000     0.005     1600   MonitorMixin#mon_enter
  0.59      0.012     0.012     0.000     0.000     1600   Fluent::DummyInput#generate
  0.54      0.019     0.011     0.000     0.008     1600   MonitorMixin#mon_exit
  0.54      0.063     0.011     0.000     0.052     1600   Fluent::RecordFilterMixin#format_stream
  0.46      0.169     0.009     0.000     0.159     1600   Fluent::BufferedOutput#emit
  0.45      0.208     0.009     0.000     0.199     1600   Fluent::EventRouter#emit
  0.39      0.008     0.008     0.000     0.000     1600   Array#to_msgpack
  0.38      0.097     0.008     0.000     0.089     1600   Fluent::BasicBuffer#emit
  0.37      0.188     0.008     0.000     0.180     1600   Fluent::EventRouter#emit_stream
  0.36      0.015     0.007     0.000     0.007     1709   <Class::Time>#now
  0.34      0.010     0.007     0.000     0.003     1600   Fluent::MemoryBufferChunk#<<
  0.33      0.025     0.007     0.000     0.019     1600   Fluent::EngineClass#now
  0.32      0.014     0.006     0.000     0.008     1600   Fluent::SetTagKeyMixin#filter_record
  0.31      0.008     0.006     0.000     0.002     1600   Fluent::SetTimeKeyMixin#filter_record
  0.30      0.012     0.006     0.000     0.005     1600   Fluent::EventRouter#match
  0.28      0.013     0.006     0.000     0.007     1600   Fluent::BasicBuffer#storable?
  0.27      0.005     0.005     0.000     0.000     1600   Fluent::EventRouter::MatchCache#get
  0.26      0.013     0.005     0.000     0.008     1600   Fluent::KinesisHelper::Format#format
  0.25      0.005     0.005     0.000     0.000     1600   Fluent::OneEventStream#initialize
  0.25      0.007     0.005     0.000     0.002     1709   Time#initialize
  0.24      0.005     0.005     0.000     0.000     4800   <Class::Thread>#current
  0.24      0.011     0.005     0.000     0.006     1606  *Class#new
  0.22      0.008     0.004     0.000     0.003     1645   Time#to_i
  0.22      0.006     0.004     0.000     0.002     1600   MonitorMixin#mon_check_owner
  0.21      0.010     0.004     0.000     0.006     1600   Kernel#dup
  0.20      0.006     0.004     0.000     0.002     1600   Fluent::MemoryBufferChunk#size
  0.18      0.006     0.004     0.000     0.002     1600   Kernel#initialize_dup
  0.16      0.003     0.003     0.000     0.000     1654   Fixnum#divmod
  0.15      0.003     0.003     0.000     0.000     3200   String#bytesize
  0.14      0.003     0.003     0.000     0.000     1603   String#force_encoding
  0.11      1.762     0.002     1.759     0.000       32   Kernel#sleep
  0.11      0.002     0.002     0.000     0.000     1709   Fixnum#+
  0.11      0.002     0.002     0.000     0.000     1600   String#initialize_copy
  0.10      0.002     0.002     0.000     0.000     1600   Thread::Mutex#lock
  0.09      0.002     0.002     0.000     0.000     1600   String#to_s
  0.09      0.002     0.002     0.000     0.000     1600   Fluent::RecordFilterMixin#filter_record
  0.09      0.002     0.002     0.000     0.000     1600   Thread::Mutex#unlock
  0.08      0.002     0.002     0.000     0.000     1600   Kernel#nil?
  0.08      2.017     0.002     0.000     2.015       32   Fluent::DummyInput#wait
  0.08      0.002     0.002     0.000     0.000     1600   Fluent::NullOutputChain#next
  0.05      2.020     0.001     0.000     2.019       40  *Integer#times
  0.03      0.001     0.001     0.000     0.000        3   Time#utc
  0.02      0.253     0.000     0.000     0.252       36   Fluent::DummyInput#emit
  0.01      2.021     0.000     0.000     2.021        1   Fluent::DummyInput#run
  0.01      0.000     0.000     0.000     0.000       32   Time#-
  0.00      0.001     0.000     0.000     0.001        3   Fluent::MemoryBufferChunk#initialize
  0.00      0.000     0.000     0.000     0.000       32   Numeric#quo
  0.00      0.000     0.000     0.000     0.000       32   Float#>
  0.00      0.000     0.000     0.000     0.000       32   Fixnum#-
  0.00      0.000     0.000     0.000     0.000        9   Kernel#rand
  0.00      0.000     0.000     0.000     0.000       32   Fixnum#fdiv
  0.00      0.000     0.000     0.000     0.000        3   Fluent::BufferChunk#initialize
  0.00      0.000     0.000     0.000     0.000        1   Array#each
  0.00      0.001     0.000     0.000     0.001        3   Fluent::MemoryBuffer#new_chunk
  0.00      0.000     0.000     0.000     0.000        3   MonitorMixin#mon_initialize
  0.00      0.000     0.000     0.000     0.000        3   MonitorMixin#initialize
  0.00      0.000     0.000     0.000     0.000        3   Array#pack
  0.00      0.000     0.000     0.000     0.000        3   Time#usec
  0.00      0.000     0.000     0.000     0.000        1   Regexp#match
  0.00      0.000     0.000     0.000     0.000        3   Bignum#|
  0.00      0.000     0.000     0.000     0.000        6   Fixnum#<=>
  0.00      0.000     0.000     0.000     0.000        3   Bignum#>>
  0.00      0.000     0.000     0.000     0.000        1   Fluent::GlobMatchPattern#match
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#<<
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#*
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EventRouter::Rule#match?
  0.00      0.000     0.000     0.000     0.000        3   Thread::Mutex#initialize
  0.00      0.000     0.000     0.000     0.000        3   BasicObject#initialize
  0.00      0.000     0.000     0.000     0.000        3   Bignum#&
  0.00      0.000     0.000     0.000     0.000        1   Enumerable#each_with_index
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EventRouter#find
  0.00      0.000     0.000     0.000     0.000        1   Integer#to_i
  0.00      0.000     0.000     0.000     0.000        1   MatchData#==
  0.00      0.000     0.000     0.000     0.000        1   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        1   BasicObject#!=

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304340644820
Fiber ID: 70304343237440
Total: 4.397748
Sort by: self_time

 %self      total      self      wait     child     calls  name
  2.41      3.428     0.106     0.009     3.313     3207  *Array#each
  1.48      0.255     0.065     0.009     0.181     8000   Protobuf::Message#[]=
  1.01      3.076     0.044     0.009     3.023    14450  *Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.98      3.105     0.043     0.000     3.062    14451  *Thread::Mutex#synchronize
  0.88      0.039     0.039     0.000     0.000    20800   Protobuf::Field::BaseField#getter
  0.80      0.051     0.035     0.000     0.016     8000   Protobuf::Message::Fields::ClassMethods#get_field
  0.74      0.076     0.033     0.000     0.043    12800   Kernel#dup
  0.71      0.105     0.031     0.000     0.074     3200   Protobuf::Field::StringField#encode
  0.69      0.131     0.030     0.000     0.101     4800   Concurrent::Synchronization::MriMutexLockableObject#initialize
  0.64      0.069     0.028     0.000     0.040     8000   <Class::Protobuf::Field::VarintField>#cached_varint
  0.62      0.644     0.027     0.000     0.616    20803  *Class#new
  0.51      0.043     0.022     0.006     0.015    12800   Kernel#initialize_dup
  0.50      0.040     0.022     0.006     0.012     4800   Concurrent::Synchronization::Object#initialize
  0.48      0.305     0.021     0.000     0.283     3200   Protobuf::Message#initialize
  0.48      0.276     0.021     0.000     0.255     3200   Hash#each
  0.48      0.021     0.021     0.000     0.000    12800   Protobuf::Field::BaseField#required?
  0.47      0.089     0.021     0.000     0.069     8000   <Class::Protobuf::Field::VarintField>#encode
  0.46      0.020     0.020     0.000     0.000    20800   Kernel#nil?
  0.39      0.017     0.017     0.000     0.000    14400   Kernel#class
  0.38      0.222     0.017     0.000     0.205     1600   Concurrent::IVar#ns_initialize
  0.38      0.019     0.017     0.002     0.000     8000   Protobuf::Field::BaseField#setter
  0.37      0.016     0.016     0.000     0.000     8002   Protobuf::Message::Fields::ClassMethods#field_store
  0.36      0.048     0.016     0.000     0.033     1600   Protobuf::Field::BytesField#encode
  0.35      0.015     0.015     0.000     0.000     8000   Protobuf::Field::BaseField#tag_encoded
  0.33      0.844     0.015     0.000     0.829     1600   KinesisProducer::Library#add_message
  0.33      0.015     0.015     0.000     0.000    14450   Thread::Mutex#owned?
  0.33      0.015     0.015     0.000     0.000    12800   String#initialize_copy
  0.32      0.026     0.014     0.000     0.011     8000   IO::generic_writable#<<
  0.31      1.340     0.014     0.000     1.327     1600   KinesisProducer::Library#put_record
  0.31      0.048     0.014     0.000     0.035     1600   <Class::Yajl::Encoder>#encode
  0.31      0.014     0.014     0.000     0.000     8000   Protobuf::Field::BaseField#repeated?
  0.30      0.013     0.013     0.000     0.000    14400   NilClass#nil?
  0.28      0.159     0.012     0.000     0.146     1600   Fluent::KinesisHelper::Format#convert_record
  0.28      0.612     0.012     0.000     0.600     3200  *Protobuf::Message::Serialization#encode
  0.28      0.057     0.012     0.000     0.045     4800   Concurrent::Concern::Obligation#state
  0.27      0.012     0.012     0.000     0.000     3200   String#encode!
  0.26      0.032     0.012     0.000     0.020     1600   Protobuf::Field::VarintField#acceptable?
  0.26      0.011     0.011     0.000     0.000     8000   StringIO#write
  0.25      0.053     0.011     0.000     0.042     3200   Concurrent::Concern::Obligation#complete?
  0.25      0.055     0.011     0.000     0.044     1600   KinesisProducer::Protobuf::Message#id=
  0.25      2.802     0.011     0.000     2.791     3200   Concurrent::Concern::Obligation#wait
  0.23      0.010     0.010     0.000     0.000     9600   Kernel#is_a?
  0.23      0.017     0.010     0.000     0.007     3200   Protobuf::Field::VarintField#coerce!
  0.23      0.010     0.010     0.000     0.000     1600   Concurrent::Concern::Dereferenceable#ns_set_deref_options
  0.23      0.012     0.010     0.000     0.002     1600   KinesisProducer::Protobuf::PutRecord#data=
  0.22      0.299     0.010     0.000     0.289     1600   Concurrent::IVar#initialize
  0.22      0.014     0.010     0.000     0.004     1600   <Class::Yajl::Encoder>#new
  0.22      0.013     0.010     0.000     0.004     3200   StringIO#initialize
  0.21      0.017     0.009     0.000     0.008     1600   <Module::SecureRandom>#gen_random
  0.21      0.094     0.009     0.000     0.085     1600   Concurrent::Concern::Obligation#value!
  0.21      0.168     0.009     0.000     0.159        3   MessagePack::Unpacker#feed_each
  0.20      0.349     0.009     0.000     0.340     1600   Protobuf::Field::MessageField#encode
  0.19      0.145     0.008     0.000     0.136     1600   Fluent::KinesisProducerOutput#convert_format
  0.19      0.014     0.008     0.000     0.006     1600   Yajl::Encoder#encode
  0.19      0.090     0.008     0.000     0.082     1600   Fluent::KinesisHelper::Format#data_format
  0.19      0.078     0.008     0.000     0.070     1600   Fluent::TextFormatter::StructuredFormatMixin#format
  0.18      0.061     0.008     0.000     0.053     3200   Concurrent::Concern::Obligation#incomplete?
  0.18      0.315     0.008     0.000     0.308     4800  *<Class::Concurrent::Synchronization::MriMutexLockableObject>#new
  0.18      0.008     0.008     0.000     0.000     1600   <Module::OpenSSL::Random>#random_bytes
  0.18      0.009     0.008     0.000     0.002     1600   Concurrent::MutexAtomicFixnum#range_check!
  0.17      0.073     0.008     0.000     0.065     1600   Concurrent::Event#initialize
  0.17      0.070     0.008     0.000     0.062     1600   Concurrent::Collection::CopyOnWriteObserverSet#initialize
  0.17      0.009     0.008     0.000     0.001     1600   KinesisProducer::Protobuf::PutRecord#partition_key=
  0.17      0.007     0.007     0.000     0.000     4800   Thread::ConditionVariable#initialize
  0.17      0.046     0.007     0.000     0.039     1600   Fluent::KinesisHelper::Format#key
  0.17      0.027     0.007     0.001     0.019     1600   Random::Formatter#random_bytes
  0.16      0.574     0.007     0.000     0.567     3200  *Protobuf::Message#each_field_for_serialization
  0.16      0.010     0.007     0.000     0.003     1600   KinesisProducer::Protobuf::Message#put_record=
  0.16      0.007     0.007     0.000     0.000     4800   Thread::Mutex#initialize
  0.15      0.011     0.007     0.000     0.005     1600   KinesisProducer::Daemon#add
  0.15      0.007     0.007     0.000     0.000     4800   Concurrent::Synchronization::MriAttrVolatile#full_memory_barrier
  0.15      0.008     0.006     0.000     0.001     1600   KinesisProducer::Protobuf::PutRecord#stream_name=
  0.14      0.006     0.006     0.000     0.000     3200   Protobuf::Message::Fields::ClassMethods#all_fields
  0.14      0.006     0.006     0.000     0.000     4800   Concurrent::Synchronization::Object#initialize_volatile_with_cas
  0.14      0.006     0.006     0.000     0.000     4800   Concurrent::Synchronization::MriObject#initialize
  0.14      0.037     0.006     0.000     0.031     1600   Random::Formatter#hex
  0.14      0.055     0.006     0.000     0.048     1600   <Module::Yajl>#dump
  0.13      0.065     0.006     0.000     0.059     1600   Fluent::TextFormatter::JSONFormatter#format_record
  0.13      0.006     0.006     0.000     0.000     4800   Integer#to_i
  0.13      0.094     0.006     0.000     0.088     1600   Concurrent::Concern::Obligation#init_obligation
  0.13      0.006     0.006     0.000     0.000     1600   Array#flatten!
  0.13      0.015     0.006     0.000     0.009     1600   Concurrent::MutexAtomicFixnum#ns_set
  0.13      0.580     0.005     0.000     0.574     3200  *<Class::Protobuf::Encoder>#encode
  0.12      0.007     0.005     0.000     0.002     1600   Concurrent::Concern::Dereferenceable#apply_deref_options
  0.12      0.005     0.005     0.000     0.000     1600   Concurrent::Event#ns_initialize
  0.11      0.005     0.005     0.000     0.000     4800   String#force_encoding
  0.11      0.059     0.005     0.000     0.055     1600   Method#call
  0.11      1.350     0.005     0.000     1.345        3   Array#map
  0.11      0.005     0.005     0.000     0.000     4800   Kernel#block_given?
  0.11      0.043     0.005     0.000     0.038     1600   KinesisProducer::Library#get_and_inc_message_id
  0.11      0.025     0.005     0.000     0.020     1600   Concurrent::Concern::Dereferenceable#set_deref_options
  0.10      0.005     0.005     0.000     0.000     1600   Fluent::TextFormatter::HandleTagAndTimeMixin#filter_record
  0.10      0.004     0.004     0.000     0.000     1600   String#unpack
  0.10      0.038     0.004     0.000     0.034     1600   Concurrent::MutexAtomicFixnum#increment
  0.10      0.023     0.004     0.000     0.019     1600   Protobuf::Field::VarintField#encode
  0.10      0.004     0.004     0.000     0.000     4800   Module#===
  0.10      0.004     0.004     0.000     0.000     1600   Fluent::KinesisHelper::Client#client
  0.10      0.584     0.004     0.000     0.580     3200  *Protobuf::Message::Serialization#encode_to
  0.09      0.004     0.004     0.000     0.000     1600   Concurrent::Collection::NonConcurrentMapBackend#[]=
  0.09      0.004     0.004     0.000     0.000     3200   Hash#to_hash
  0.09      0.015     0.004     0.000     0.011     1600   Concurrent::Collection::MriMapBackend#[]=
  0.09      0.004     0.004     0.000     0.000     3200   StringIO#set_encoding
  0.09      0.026     0.004     0.000     0.022     1600   Concurrent::Concern::Dereferenceable#value
  0.09      0.022     0.004     0.000     0.018     1600   Concurrent::Concern::Obligation#rejected?
  0.08      0.004     0.004     0.000     0.000     3200   BasicObject#initialize
  0.08      0.004     0.004     0.000     0.000     1600   Concurrent::Collection::CopyOnWriteObserverSet#ns_initialize
  0.08      0.003     0.003     0.000     0.000     1602   Hash#keys
  0.08      0.003     0.003     0.000     0.000     1600   String#chomp
  0.07      0.003     0.003     0.000     0.000     3200   StringIO#string
  0.07      0.003     0.003     0.000     0.000     3200   Array#include?
  0.07      0.003     0.003     0.000     0.000     1600   <Class::Protobuf::Field::Uint64Field>#max
  0.07      0.003     0.003     0.000     0.000     1600   <Class::Protobuf::Field::Uint64Field>#min
  0.06      0.003     0.003     0.000     0.000     1600   KinesisProducer::Daemon#debug?
  0.05      0.002     0.002     0.000     0.000     1600   Fixnum#<=
  0.05      0.002     0.002     0.000     0.000     1600   Yajl::Encoder#initialize
  0.05      0.002     0.002     0.000     0.000     1601   String#to_s
  0.05      0.002     0.002     0.000     0.000     1600   Kernel#respond_to?
  0.05      0.002     0.002     0.000     0.000     1600   Thread::Queue#push
  0.04      0.002     0.002     0.000     0.000     1600   Integer#to_int
  0.04      0.002     0.002     0.000     0.000     1600   Hash#has_key?
  0.04      2.738     0.002     2.737     0.000       51   Thread::Mutex#sleep
  0.03      0.002     0.002     0.000     0.000     1600   Array#any?
  0.03      2.740     0.001     0.000     2.738       51   Thread::ConditionVariable#wait
  0.01      2.729     0.001     0.000     2.728       50   Concurrent::Synchronization::AbstractLockableObject#ns_wait_until
  0.01      0.264     0.001     0.000     0.263       15  *MonitorMixin#mon_synchronize
  0.01      2.728     0.000     0.000     2.728       50   Concurrent::Synchronization::MriMutexLockableObject#ns_wait
  0.01      0.000     0.000     0.000     0.000       18   MonitorMixin#mon_exit
  0.01      0.000     0.000     0.000     0.000       15   MonitorMixin#mon_enter
  0.01      4.124     0.000     0.000     4.124        3   Fluent::BufferedOutput#try_flush
  0.01      0.168     0.000     0.000     0.168        3   Enumerator#each
  0.00      4.398     0.000     0.000     4.398        1   Fluent::OutputThread#run
  0.00      0.000     0.000     0.000     0.000       12   <Class::Time>#now
  0.00      2.730     0.000     0.000     2.730       50   Concurrent::Event#wait
  0.00      4.383     0.000     0.000     4.383        3   Fluent::KinesisProducerOutput#write
  0.00      0.000     0.000     0.000     0.000        2   <Module::OpenSSL::Random>#random_add
  0.00      0.000     0.000     0.000     0.000       19   Thread::Mutex#unlock
  0.00      0.000     0.000     0.000     0.000       50   Concurrent::Concern::Obligation#event
  0.00      0.000     0.000     0.000     0.000       51   <Class::Thread>#current
  0.00      0.001     0.000     0.000     0.001        3   Fluent::BasicBuffer#push
  0.00      0.000     0.000     0.000     0.000        6   String#bytesize
  0.00      0.000     0.000     0.000     0.000        3   Thread::Mutex#try_lock
  0.00      0.000     0.000     0.000     0.000        2   Array#uniq
  0.00      0.000     0.000     0.000     0.000       12   Time#initialize
  0.00      4.384     0.000     0.000     4.383        3   Fluent::BasicBuffer#pop
  0.00      0.000     0.000     0.000     0.000       18   MonitorMixin#mon_check_owner
  0.00      0.000     0.000     0.000     0.000        2   Fluent::BasicBuffer#keys
  0.00      0.000     0.000     0.000     0.000       12   Fixnum#+
  0.00      0.000     0.000     0.000     0.000       12   Time#to_f
  0.00      0.000     0.000     0.000     0.000       12   Numeric#quo
  0.00      0.000     0.000     0.000     0.000       15   Thread::Mutex#lock
  0.00      0.000     0.000     0.000     0.000        3   MonitorMixin#mon_try_enter
  0.00      0.000     0.000     0.000     0.000       12   Fixnum#fdiv
  0.00      0.000     0.000     0.000     0.000        5   Fluent::BasicBuffer#queue_size
  0.00      0.168     0.000     0.000     0.168        3   Fluent::KinesisHelper::Format#convert_to_records
  0.00      0.000     0.000     0.000     0.000       50   Kernel#hash
  0.00      0.000     0.000     0.000     0.000        1   <Class::Random>#raw_seed
  0.00      0.000     0.000     0.000     0.000        6   Fluent::BufferChunk#empty?
  0.00      0.168     0.000     0.000     0.168        3   Fluent::MemoryBufferChunk#msgpack_each
  0.00      0.000     0.000     0.000     0.000        2   Enumerable#sort_by
  0.00      0.000     0.000     0.000     0.000        3   Array#compact
  0.00      0.000     0.000     0.000     0.000        6   Fluent::MemoryBufferChunk#size
  0.00      0.012     0.000     0.000     0.012        1   Fluent::OutputThread#cond_wait
  0.00      0.000     0.000     0.000     0.000        3   Array#delete_if
  0.00      4.383     0.000     0.000     4.383        3   Fluent::BasicBuffer#write_chunk
  0.00      0.000     0.000     0.000     0.000        3   Fluent::EngineClass::DummyMessagePackFactory#unpacker
  0.00      0.168     0.000     0.000     0.168        3   Enumerable#map
  0.00      0.000     0.000     0.000     0.000        3   Float#>
  0.00      0.001     0.000     0.000     0.001        2   Fluent::BufferedOutput#enqueue_buffer
  0.00      0.000     0.000     0.000     0.000       22   Fixnum#<=>
  0.00      0.000     0.000     0.000     0.000        1   Array#join
  0.00      0.000     0.000     0.000     0.000        3   MessagePack::Unpacker#initialize
  0.00      2.865     0.000     0.000     2.865        3   Fluent::KinesisHelper::KPL#wait_futures
  0.00      0.000     0.000     0.000     0.000        2   Fixnum#zero?
  0.00      1.350     0.000     0.000     1.350        3   Fluent::KinesisHelper::KPL#write_chunk_to_kpl
  0.00      0.000     0.000     0.000     0.000        3   Kernel#to_enum
  0.00      0.000     0.000     0.000     0.000        3   Fluent::MemoryBuffer#enqueue
  0.00      0.000     0.000     0.000     0.000        3   Hash#delete
  0.00      0.262     0.000     0.000     0.262        1   Fluent::BufferedOutput#before_shutdown
  0.00      0.000     0.000     0.000     0.000        3   Array#<<
  0.00      0.000     0.000     0.000     0.000        5   Array#size
  0.00      0.262     0.000     0.000     0.262        1   Fluent::MemoryBuffer#before_shutdown
  0.00      0.000     0.000     0.000     0.000        1   <Module::Process>#clock_gettime
  0.00      0.000     0.000     0.000     0.000        1   Hash#each_key
  0.00      0.000     0.000     0.000     0.000        6   Kernel#object_id
  0.00      0.000     0.000     0.000     0.000        3   Array#first
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#to_s
  0.00      0.000     0.000     0.000     0.000        3   Array#empty?
  0.00      0.000     0.000     0.000     0.000        3   Fluent::MemoryBufferChunk#purge
  0.00      0.000     0.000     0.000     0.000        2   Hash#values
  0.00      0.000     0.000     0.000     0.000        1   Symbol#to_s

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304336925660
Fiber ID: 70304336925140
Total: 3.842032
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.48      3.809     0.019     0.000     3.790     1602   KinesisProducer::Daemon#send_message
  0.33      0.897     0.013     0.884     0.000     1601   IO#flush
  0.23      3.842     0.009     0.000     3.833        1   Concurrent::RubyThreadPoolExecutor::Worker#run_task
  0.20      0.016     0.008     0.000     0.008     1602   Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.16      0.006     0.006     0.000     0.000     1602   Thread::Mutex#synchronize
  0.13      0.021     0.005     0.000     0.016     1602   Concurrent::MutexAtomicBoolean#false?
  0.13      0.005     0.005     0.000     0.000     3202   IO#write
  0.12      0.005     0.005     0.000     0.000     1601   Array#pack
  0.09      0.003     0.003     0.000     0.000     1601   KinesisProducer::Daemon#debug?
  0.06      2.884     0.002     2.882     0.000     1603   Thread::Queue#pop
  0.05      0.002     0.002     0.000     0.000     1602   Thread::Mutex#owned?
  0.00      3.842     0.000     0.000     3.842        1   Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      3.842     0.000     0.000     3.842        1   Kernel#loop
  0.00      3.842     0.000     0.000     3.842        1   Kernel#catch
  0.00      0.000     0.000     0.000     0.000        1   <Module::Concurrent>#monotonic_time
  0.00      0.000     0.000     0.000     0.000        1   #<Class:0x007fe202d0f868>#get_time
  0.00      0.000     0.000     0.000     0.000        2   Symbol#===
  0.00      0.000     0.000     0.000     0.000        1   <Module::Process>#clock_gettime

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304336910120
Fiber ID: 70304336907040
Total: 3.836144
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.00      0.001     0.000     0.000     0.001        5  *Array#each
  0.00      0.000     0.000     0.000     0.000        7   Protobuf::Message#[]=
  0.00      3.835     0.000     3.835     0.000        1   Kernel#sleep
  0.00      0.000     0.000     0.000     0.000        6   Class#new
  0.00      0.000     0.000     0.000     0.000        5   <Class::Protobuf::Field::VarintField>#encode
  0.00      0.000     0.000     0.000     0.000        2   Array#uniq
  0.00      3.836     0.000     0.000     3.836        1   Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      0.000     0.000     0.000     0.000        3   Protobuf::Message::Fields::ClassMethods#all_fields
  0.00      0.000     0.000     0.000     0.000        7   Protobuf::Message::Fields::ClassMethods#get_field
  0.00      0.000     0.000     0.000     0.000       14   Protobuf::Field::BaseField#getter
  0.00      0.000     0.000     0.000     0.000        2   Protobuf::Field::StringField#encode
  0.00      0.000     0.000     0.000     0.000       17   Kernel#nil?
  0.00      0.000     0.000     0.000     0.000        9   Protobuf::Message::Fields::ClassMethods#field_store
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#add
  0.00      0.001     0.000     0.000     0.001        1   KinesisProducer::Daemon#make_set_credential_message
  0.00      0.000     0.000     0.000     0.000        2   Enumerable#sort_by
  0.00      0.000     0.000     0.000     0.000        3   Hash#each
  0.00      0.000     0.000     0.000     0.000        3   Protobuf::Message#initialize
  0.00      0.000     0.000     0.000     0.000        6   Protobuf::Field::BaseField#setter
  0.00      0.000     0.000     0.000     0.000       12   Kernel#class
  0.00      3.836     0.000     0.000     3.836        1   Kernel#loop
  0.00      0.000     0.000     0.000     0.000       18   Kernel#hash
  0.00      0.000     0.000     0.000     0.000        1   Thread::Mutex#owned?
  0.00      0.000     0.000     0.000     0.000        6   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        8   Protobuf::Field::BaseField#required?
  0.00      0.000     0.000     0.000     0.000        6   Protobuf::Field::BaseField#repeated?
  0.00      0.000     0.000     0.000     0.000        4   <Class::Protobuf::Field::VarintField>#cached_varint
  0.00      0.000     0.000     0.000     0.000        3   StringIO#initialize
  0.00      0.000     0.000     0.000     0.000        6   IO::generic_writable#<<
  0.00      0.000     0.000     0.000     0.000        6   Protobuf::Field::BaseField#tag_encoded
  0.00      0.000     0.000     0.000     0.000        6   StringIO#write
  0.00      0.000     0.000     0.000     0.000        9   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000        6   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        2   Array#pack
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::Credentials#akid=
  0.00      0.000     0.000     0.000     0.000        2   String#encode!
  0.00      3.836     0.000     0.000     3.836        1   Kernel#catch
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::SetCredentials#credentials=
  0.00      3.836     0.000     0.000     3.836        1   Concurrent::RubyThreadPoolExecutor::Worker#run_task
  0.00      0.000     0.000     0.000     0.000        1   <Class::Protobuf::Field::Uint64Field>#max
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::SetCredentials#for_metrics=
  0.00      0.000     0.000     0.000     0.000        6   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#<=>
  0.00      0.000     0.000     0.000     0.000        1   Protobuf::Field::VarintField#acceptable?
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::Message#id=
  0.00      3.836     0.000     0.000     3.836        1   KinesisProducer::Daemon#update_credentials
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::MutexAtomicBoolean#false?
  0.00      0.001     0.000     0.000     0.001        3  *Protobuf::Message::Serialization#encode
  0.00      0.000     0.000     0.000     0.000        1   Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.00      0.000     0.000     0.000     0.000        1   <Module::Concurrent>#monotonic_time
  0.00      0.000     0.000     0.000     0.000        2   Protobuf::Field::VarintField#coerce!
  0.00      0.000     0.000     0.000     0.000        1   Protobuf::Field::BoolField#encode
  0.00      0.000     0.000     0.000     0.000        8   Fixnum#>>
  0.00      0.000     0.000     0.000     0.000        8   Fixnum#|
  0.00      0.001     0.000     0.000     0.001        3  *Protobuf::Message#each_field_for_serialization
  0.00      0.000     0.000     0.000     0.000        3   BasicObject#initialize
  0.00      0.001     0.000     0.000     0.001        1   KinesisProducer::Daemon#make_message
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::Credentials#secret_key=
  0.00      0.000     0.000     0.000     0.000        2   String#force_encoding
  0.00      0.000     0.000     0.000     0.000        8   Fixnum#&
  0.00      0.000     0.000     0.000     0.000        4   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        3   StringIO#set_encoding
  0.00      0.000     0.000     0.000     0.000        2   Hash#values
  0.00      0.000     0.000     0.000     0.000        1   Thread::Queue#pop
  0.00      0.000     0.000     0.000     0.000        1   #<Class:0x007fe202d0f868>#get_time
  0.00      0.001     0.000     0.000     0.001        2  *Protobuf::Field::MessageField#encode
  0.00      0.000     0.000     0.000     0.000        3   Kernel#block_given?
  0.00      0.000     0.000     0.000     0.000        1   Array#include?
  0.00      0.000     0.000     0.000     0.000        1   Protobuf::Field::BoolField#coerce!
  0.00      0.000     0.000     0.000     0.000        2   Symbol#to_s
  0.00      0.000     0.000     0.000     0.000        1   Protobuf::Field::BoolField#acceptable?
  0.00      0.000     0.000     0.000     0.000        3   Hash#to_hash
  0.00      0.000     0.000     0.000     0.000        2   Symbol#===
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Protobuf::Message#set_credentials=
  0.00      0.001     0.000     0.000     0.001        3  *Protobuf::Message::Serialization#encode_to
  0.00      0.000     0.000     0.000     0.000        3   StringIO#string
  0.00      0.000     0.000     0.000     0.000        1   Thread::Mutex#synchronize
  0.00      0.000     0.000     0.000     0.000        1   <Class::Protobuf::Field::Uint64Field>#min
  0.00      0.000     0.000     0.000     0.000        1   <Module::Process>#clock_gettime
  0.00      0.001     0.000     0.000     0.001        3  *<Class::Protobuf::Encoder>#encode
  0.00      0.001     0.000     0.000     0.001        1   KinesisProducer::Daemon#make_set_credentials_message
  0.00      0.000     0.000     0.000     0.000        2   Integer#to_i
  0.00      0.000     0.000     0.000     0.000        3   Module#===
  0.00      0.000     0.000     0.000     0.000        1   Thread::Queue#push
  0.00      0.000     0.000     0.000     0.000        2   Kernel#respond_to?
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#<=
  0.00      0.000     0.000     0.000     0.000        1   Protobuf::Field::VarintField#encode
  0.00      0.000     0.000     0.000     0.000        1   Float#/
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_f
  0.00      0.000     0.000     0.000     0.000        1   KinesisProducer::Daemon#debug?

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304336928400
Fiber ID: 70304336892620
Total: 3.834560
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.88      3.741     0.034     3.707     0.000     3201   IO#read
  0.66      3.779     0.025     0.000     3.753     1601   KinesisProducer::Daemon#receive_message
  0.21      3.834     0.008     0.000     3.826        1   Concurrent::RubyThreadPoolExecutor::Worker#run_task
  0.19      0.040     0.007     0.025     0.008     1601   Concurrent::Synchronization::MriMutexLockableObject#synchronize
  0.16      0.006     0.006     0.000     0.000     1601   Thread::Mutex#synchronize
  0.15      0.006     0.006     0.000     0.000     1600   String#unpack
  0.13      0.045     0.005     0.000     0.040     1601   Concurrent::MutexAtomicBoolean#false?
  0.11      0.004     0.004     0.000     0.000     1600   Thread::Queue#push
  0.08      0.003     0.003     0.000     0.000     1600   KinesisProducer::Daemon#debug?
  0.05      0.002     0.002     0.000     0.000     1600   Array#first
  0.04      0.002     0.002     0.000     0.000     1601   Thread::Mutex#owned?
  0.00      3.835     0.000     0.000     3.835        1   Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      3.835     0.000     0.000     3.834        1   Kernel#loop
  0.00      3.835     0.000     0.000     3.835        1   Kernel#catch
  0.00      0.000     0.000     0.000     0.000        1   #<Class:0x007fe202d0f868>#get_time
  0.00      0.000     0.000     0.000     0.000        1   Thread::Queue#pop
  0.00      0.000     0.000     0.000     0.000        1   <Module::Concurrent>#monotonic_time
  0.00      0.000     0.000     0.000     0.000        1   <Module::Process>#clock_gettime
  0.00      0.000     0.000     0.000     0.000        2   Symbol#===

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304336911540
Fiber ID: 70304336892560
Total: 3.834420
Sort by: self_time

 %self      total      self      wait     child     calls  name
 10.90      0.798     0.418     0.001     0.378    32000   Protobuf::VarintPure#decode
  2.09      0.128     0.080     0.000     0.048    40317   IO::generic_readable#readbyte
  2.06      0.079     0.079     0.000     0.000    96634   Fixnum#&
  1.89      0.125     0.073     0.000     0.052    16000   Protobuf::Message::Fields::ClassMethods#get_field
  1.83      0.111     0.070     0.003     0.037    40317   Numeric#nonzero?
  1.50      2.081     0.058     0.001     2.023     4800  *<Class::Protobuf::Decoder>#decode_each_field
  1.43      0.129     0.055     0.000     0.074    14401  *Thread::Mutex#synchronize
  1.36      0.191     0.052     0.012     0.127    12801  *Concurrent::Synchronization::MriMutexLockableObject#synchronize
  1.26      0.048     0.048     0.000     0.000    40317   StringIO#getbyte
  1.20      0.125     0.046     0.000     0.079     6400   Protobuf::Field::VarintField#acceptable?
  1.10      0.070     0.042     0.000     0.028    12800   Protobuf::Field::VarintField#coerce!
  1.05      0.040     0.040     0.000     0.000    40317   Fixnum#<<
  0.97      0.037     0.037     0.000     0.000    19200   Protobuf::Field::BaseField#repeated?
  0.96      0.037     0.037     0.000     0.000    40317   Fixnum#zero?
  0.95      0.180     0.037     0.000     0.143    11200   Class#new
  0.93      0.036     0.036     0.000     0.000    30400   Kernel#class
  0.89      0.052     0.034     0.018     0.000    16000   Protobuf::Message::Fields::ClassMethods#field_store
  0.86      0.033     0.033     0.000     0.000    40317   Fixnum#|
  0.84      0.118     0.032     0.068     0.018     4800   Protobuf::Message#initialize
  0.79      1.599     0.030     0.000     1.569    16000  *Protobuf::Field::BaseField#set
  0.78      0.030     0.030     0.000     0.000    14400   Protobuf::Field::BaseField#setter
  0.71      1.677     0.027     0.000     1.650    16000  *Protobuf::Message::Serialization#set_field_bytes
  0.67      0.298     0.026     0.000     0.273     1600   Concurrent::IVar#set
  0.63      0.024     0.024     0.000     0.000    20800   StringIO#eof?
  0.55      0.021     0.021     0.000     0.000    22400   Kernel#is_a?
  0.48      0.379     0.019     0.000     0.360     1600   KinesisProducer::Library::Handler#on_put_record_result
  0.44      0.032     0.017     0.001     0.015     1600   Protobuf::Field::FieldArray#normalize
  0.42      0.016     0.016     0.000     0.000    16000   Kernel#nil?
  0.41      0.016     0.016     0.000     0.000    12800   Integer#to_i
  0.41      0.038     0.016     0.000     0.022     3200   Protobuf::Field::StringField#decode
  0.37      0.014     0.014     0.000     0.000    12801   Thread::Mutex#owned?
  0.37      0.061     0.014     0.000     0.046     1600   KinesisProducer::Protobuf::Message#id=
  0.36      0.020     0.014     0.000     0.006     4800   StringIO#initialize
  0.35      0.014     0.014     0.000     0.000    16000   Fixnum#>>
  0.33      0.013     0.013     0.000     0.000     6400   StringIO#read
  0.32      0.012     0.012     0.000     0.000     6400   Protobuf::Field::VarintField#decode
  0.32      0.054     0.012     0.000     0.042     1600   KinesisProducer::Protobuf::Attempt#delay=
  0.31      0.058     0.012     0.000     0.046     1600   Concurrent::IVar#ns_complete_without_notification
  0.31      0.012     0.012     0.000     0.000    11200   Kernel#respond_to?
  0.29      0.014     0.011     0.000     0.003     3200   Protobuf::Field::BoolField#coerce!
  0.29      0.029     0.011     0.000     0.018     1600   KinesisProducer::Protobuf::Attempt#success=
  0.29      3.806     0.011     0.000     3.795     1601   KinesisProducer::Daemon#return_message
  0.29      0.011     0.011     0.000     0.000     9600   Kernel#block_given?
  0.27      0.055     0.010     0.000     0.044     1600   KinesisProducer::Protobuf::Message#source_id=
  0.27      0.050     0.010     0.000     0.040     1600   KinesisProducer::Protobuf::Attempt#duration=
  0.27      0.026     0.010     0.000     0.016     1600   KinesisProducer::Protobuf::PutRecordResult#success=
  0.23      0.009     0.009     0.000     0.000     8000   Array#include?
  0.23      0.043     0.009     0.000     0.034     1600   Concurrent::Collection::CopyOnWriteObserverSet#notify_and_delete_observers
  0.23      0.013     0.009     0.000     0.004     3200   Protobuf::Field::BoolField#acceptable?
  0.23      0.009     0.009     0.000     0.000     6400   Hash#each
  0.22      0.392     0.009     0.000     0.384     1600   KinesisProducer::Library::Handler#on_message
  0.22      0.017     0.009     0.000     0.008     1600   Protobuf::Field::BaseField#default_value
  0.21      0.010     0.008     0.000     0.001     1600   KinesisProducer::Protobuf::PutRecordResult#shard_id=
  0.21      0.015     0.008     0.000     0.007     1600   Concurrent::Event#ns_set
  0.21      0.009     0.008     0.000     0.001     1600   KinesisProducer::Protobuf::PutRecordResult#sequence_number=
  0.21      0.051     0.008     0.000     0.043     1600   Concurrent::IVar#notify_observers
  0.20      0.019     0.008     0.000     0.011     3200   Kernel#dup
  0.20      0.011     0.008     0.000     0.003     1600   KinesisProducer::Protobuf::Message#put_record_result=
  0.19      3.834     0.007     0.000     3.827        1   Concurrent::RubyThreadPoolExecutor::Worker#run_task
  0.18      0.042     0.007     0.000     0.035     1600   Protobuf::Field::FieldArray#<<
  0.18      0.012     0.007     0.001     0.004     1600   Concurrent::Collection::CopyOnWriteObserverSet#notify_to
  0.18      0.069     0.007     0.000     0.062     1600   Concurrent::Concern::Obligation#value
  0.17      2.148     0.007     0.000     2.141     4800  *Protobuf::Message::Serialization::ClassMethods#decode
  0.17      0.006     0.006     0.000     0.000     3200   KinesisProducer::Protobuf::Message#put_record_result
  0.17      2.119     0.006     0.014     2.098     4800  *Protobuf::Message::Serialization#decode
  0.16      0.006     0.006     0.000     0.000     4800   Hash#to_hash
  0.16      0.016     0.006     0.000     0.010     1600   KinesisProducer::Protobuf::PutRecordResult#attempts
  0.16      0.011     0.006     0.000     0.005     3200   Kernel#initialize_dup
  0.16      0.006     0.006     0.000     0.000     3200   <Class::Protobuf::Field::Uint64Field>#max
  0.16      2.087     0.006     0.000     2.081     4800  *Protobuf::Message::Serialization#decode_from
  0.16      0.006     0.006     0.000     0.000     3200   <Class::Protobuf::Field::Uint64Field>#min
  0.16      0.006     0.006     0.000     0.000     4800   BasicObject#initialize
  0.16      0.012     0.006     0.000     0.006     1600   Concurrent::Map#fetch
  0.15      0.006     0.006     0.000     0.000     6400   Module#===
  0.15      0.024     0.006     0.000     0.019     1600   KinesisProducer::Protobuf::PutRecordResult#success
  0.15      0.006     0.006     0.000     0.000     3200   <Class::Protobuf::Field::Uint32Field>#max
  0.15      0.006     0.006     0.000     0.000     3200   Protobuf::Field::BoolField#decode
  0.15      0.007     0.006     0.001     0.000     1600   Concurrent::Concern::Obligation#set_state
  0.15      0.006     0.006     0.000     0.000     3200   <Class::Protobuf::Field::Uint32Field>#min
  0.14      0.036     0.005     0.000     0.030     1600   Concurrent::Concern::Obligation#wait
  0.14      0.009     0.005     0.000     0.004     1600   Protobuf::Message#==
  0.14      0.010     0.005     0.000     0.004     1600   Protobuf::Field::BaseField#packed?
  0.14      0.026     0.005     0.000     0.021     1600   Concurrent::Concern::Obligation#complete?
  0.14      0.079     0.005     0.000     0.074     1600   Concurrent::IVar#complete_without_notification
  0.14      0.005     0.005     0.000     0.000     1600   Protobuf::Field::FieldArray#initialize
  0.13      0.007     0.005     0.000     0.002     1600   Concurrent::Concern::Dereferenceable#apply_deref_options
  0.13      0.007     0.005     0.000     0.002     1600   Concurrent::Synchronization::MriLockableObject#ns_broadcast
  0.13      0.005     0.005     0.000     0.000     3200   Fixnum#<=
  0.13      1.417     0.005     0.000     1.412     3200  *Protobuf::Field::MessageField#decode
  0.12      0.005     0.005     0.000     0.000     3200   String#initialize_copy
  0.12      0.026     0.005     0.000     0.021     1600   Concurrent::Concern::Obligation#compare_and_set_state
  0.12      0.014     0.004     0.000     0.009     1600   Concurrent::IVar#check_for_block_or_value!
  0.11      0.019     0.004     0.000     0.014     1601   Concurrent::MutexAtomicBoolean#false?
  0.11      0.019     0.004     0.000     0.014     1600   Concurrent::Collection::MriMapBackend#delete
  0.11      0.007     0.004     0.000     0.003     1600   Concurrent::Collection::NonConcurrentMapBackend#delete
  0.11      0.006     0.004     0.000     0.002     1600   Concurrent::Collection::NonConcurrentMapBackend#get_or_default
  0.11      0.031     0.004     0.000     0.026     1600   Concurrent::Concern::Obligation#reason
  0.11      1.255     0.004     1.250     0.000     1602   Thread::Queue#pop
  0.11      0.004     0.004     0.000     0.000     3200   Hash#fetch
  0.10      0.019     0.004     0.000     0.015     1600   Concurrent::Concern::Obligation#state
  0.10      0.026     0.004     0.000     0.022     1600   Concurrent::Concern::Dereferenceable#value
  0.10      0.006     0.004     0.000     0.002     1600   Protobuf::Field::MessageField#acceptable?
  0.10      0.036     0.004     0.000     0.032     1600   Concurrent::Event#set
  0.10      0.030     0.004     0.000     0.026     1600   Concurrent::Concern::Obligation#incomplete?
  0.10      0.022     0.004     0.000     0.018     1600   Concurrent::Collection::CopyOnWriteObserverSet#clear_observers_and_return_old
  0.10      0.004     0.004     0.000     0.000     3200   String#force_encoding
  0.09      0.003     0.003     0.000     0.000     1600   KinesisProducer::Protobuf::Message#source_id
  0.09      0.003     0.003     0.000     0.000     1600   Protobuf::Field::BaseField#getter
  0.07      0.003     0.003     0.000     0.000     1600   Protobuf::Message#to_proto
  0.07      0.003     0.003     0.000     0.000     1600   Protobuf::Field::BaseField#optional?
  0.07      0.003     0.003     0.000     0.000     1600   Hash#delete
  0.07      0.003     0.003     0.000     0.000     1600   Concurrent::Concern::Obligation#event
  0.07      0.003     0.003     0.000     0.000     1600   KinesisProducer::Daemon#debug?
  0.07      0.003     0.003     0.000     0.000     1600   Protobuf::Field::BaseField#required?
  0.05      0.002     0.002     0.000     0.000     1600   Thread::ConditionVariable#broadcast
  0.04      0.002     0.002     0.000     0.000     1600   Array#<<
  0.04      0.002     0.002     0.000     0.000     1600   Hash#key?
  0.00      3.834     0.000     0.000     3.834        1   Kernel#catch
  0.00      3.834     0.000     0.000     3.834        1   Concurrent::RubyThreadPoolExecutor::Worker#create_worker
  0.00      3.834     0.000     0.000     3.834        1   Kernel#loop
  0.00      0.000     0.000     0.000     0.000        1   Symbol#to_s
  0.00      0.000     0.000     0.000     0.000        1   #<Class:0x007fe202d0f868>#get_time
  0.00      0.000     0.000     0.000     0.000        1   <Module::Process>#clock_gettime
  0.00      0.000     0.000     0.000     0.000        1   <Module::Concurrent>#monotonic_time
  0.00      0.000     0.000     0.000     0.000        2   Symbol#===

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304334086460
Fiber ID: 70304342540140
Total: 2.566200
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.01      0.000     0.000     0.000     0.000        1   Time#strftime
  0.01      2.566     0.000     2.472     0.094        1   Fluent::RootAgent#shutdown
  0.00      0.000     0.000     0.000     0.000        2   IO#write
  0.00      0.094     0.000     0.000     0.094        1   Fluent::DummyInput#shutdown
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#event
  0.00      0.000     0.000     0.000     0.000        1   Fluent::PluginClass#lookup_name_from_class
  0.00      0.094     0.000     0.094     0.000        1   Thread#join
  0.00      0.000     0.000     0.000     0.000        2   Hash#each_pair
  0.00      0.000     0.000     0.000     0.000        2   Array#each
  0.00      0.001     0.000     0.000     0.000        1   Fluent::Log#info
  0.00      0.000     0.000     0.000     0.000        1   Hash#each
  0.00      0.000     0.000     0.000     0.000        1   IO#puts
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#caller_line
  0.00      0.000     0.000     0.000     0.000        1   IO#flush
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#puts
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#divmod
  0.00      0.000     0.000     0.000     0.000        1   Fluent::PluginId#plugin_id
  0.00      0.000     0.000     0.000     0.000        2   Kernel#class
  0.00      0.000     0.000     0.000     0.000        2   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        2   String#inspect
  0.00      0.000     0.000     0.000     0.000        3   Symbol#to_s
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_s
  0.00      0.000     0.000     0.000     0.000        2   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        1   Hash#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   <Class::Time>#now
  0.00      0.000     0.000     0.000     0.000        2   Kernel#respond_to?
  0.00      0.000     0.000     0.000     0.000        1   Hash#keys
  0.00      0.000     0.000     0.000     0.000        1   Array#join
  0.00      0.000     0.000     0.000     0.000        1   Time#initialize
  0.00      0.000     0.000     0.000     0.000        1   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000        1   Integer#round
  0.00      0.000     0.000     0.000     0.000        1   Kernel#object_id
  0.00      0.000     0.000     0.000     0.000        1   Time#to_i
  0.00      0.000     0.000     0.000     0.000        2   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        1   String#to_s
  0.00      0.000     0.000     0.000     0.000        1   Array#include?
  0.00      0.000     0.000     0.000     0.000        1   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#+
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EngineClass#push_log_event
  0.00      0.000     0.000     0.000     0.000        1   <Class::Thread>#current

* indicates recursively called methods
Measure Mode: cpu_time
Thread ID: 70304343142920
Fiber ID: 70304343142740
Total: 2.471557
Sort by: self_time

 %self      total      self      wait     child     calls  name
  0.01      0.000     0.000     0.000     0.000        2   MonitorMixin#mon_enter
  0.01      0.000     0.000     0.000     0.000        1   Time#strftime
  0.00      0.000     0.000     0.000     0.000        2   Hash#each
  0.00      2.471     0.000     0.000     2.471        1   Fluent::KinesisHelper::Initialize#shutdown
  0.00      2.471     0.000     0.000     2.471        1   Fluent::BufferedOutput#shutdown
  0.00      2.472     0.000     0.000     2.472        1   Fluent::Agent#shutdown
  0.00      0.000     0.000     0.000     0.000        7   <Class::Thread>#current
  0.00      0.000     0.000     0.000     0.000        2  *MonitorMixin#mon_synchronize
  0.00      2.471     0.000     0.000     2.470        3   Array#each
  0.00      0.000     0.000     0.000     0.000        1   Fluent::BasicBuffer#shutdown
  0.00      0.000     0.000     0.000     0.000        2   IO#write
  0.00      0.000     0.000     0.000     0.000        1   IO#puts
  0.00      0.000     0.000     0.000     0.000        2   MonitorMixin#mon_exit
  0.00      0.000     0.000     0.000     0.000        1   <Class::Thread>#pass
  0.00      2.470     0.000     0.000     2.470        1   Fluent::OutputThread#shutdown
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#event
  0.00      0.000     0.000     0.000     0.000        3   Hash#each_pair
  0.00      2.470     0.000     2.470     0.000        1   Thread#join
  0.00      0.000     0.000     0.000     0.000        2   Thread::Mutex#lock
  0.00      0.000     0.000     0.000     0.000        2   MonitorMixin#mon_check_owner
  0.00      0.001     0.000     0.000     0.001        1   Fluent::Log#info
  0.00      0.000     0.000     0.000     0.000        1   Fluent::PluginClass#lookup_name_from_class
  0.00      0.000     0.000     0.000     0.000        1   Thread::Mutex#synchronize
  0.00      0.000     0.000     0.000     0.000        1   Fluent::PluginId#plugin_id
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#caller_line
  0.00      0.000     0.000     0.000     0.000        1   Fluent::Log#puts
  0.00      0.000     0.000     0.000     0.000        3   Symbol#to_s
  0.00      2.471     0.000     0.000     2.471        1   Fluent::KinesisHelper::KPL#shutdown
  0.00      0.000     0.000     0.000     0.000        1   Array#empty?
  0.00      0.000     0.000     0.000     0.000        1   Time#initialize
  0.00      0.000     0.000     0.000     0.000        2   Kernel#initialize_dup
  0.00      0.000     0.000     0.000     0.000        1   IO#flush
  0.00      0.000     0.000     0.000     0.000        1   Fluent::EngineClass#push_log_event
  0.00      0.000     0.000     0.000     0.000        2   Kernel#dup
  0.00      0.000     0.000     0.000     0.000        1   Array#join
  0.00      0.000     0.000     0.000     0.000        3   Fixnum#divmod
  0.00      0.000     0.000     0.000     0.000        2   String#inspect
  0.00      0.000     0.000     0.000     0.000        1   Hash#initialize_copy
  0.00      0.000     0.000     0.000     0.000        2   Thread::Mutex#unlock
  0.00      0.000     0.000     0.000     0.000        1   Time#to_i
  0.00      0.000     0.000     0.000     0.000        1   Hash#keys
  0.00      0.000     0.000     0.000     0.000        2   Kernel#respond_to?
  0.00      0.000     0.000     0.000     0.000        2   NilClass#nil?
  0.00      0.000     0.000     0.000     0.000        1   Thread::ConditionVariable#signal
  0.00      0.000     0.000     0.000     0.000        1   Integer#round
  0.00      0.000     0.000     0.000     0.000        2   Kernel#is_a?
  0.00      0.000     0.000     0.000     0.000        1   String#to_s
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#to_s
  0.00      0.000     0.000     0.000     0.000        1   Kernel#object_id
  0.00      0.000     0.000     0.000     0.000        1   <Class::Time>#now
  0.00      0.000     0.000     0.000     0.000        1   String#initialize_copy
  0.00      0.000     0.000     0.000     0.000        2   Kernel#class
  0.00      0.000     0.000     0.000     0.000        1   Array#include?
  0.00      0.000     0.000     0.000     0.000        1   Fixnum#+

* indicates recursively called methods
